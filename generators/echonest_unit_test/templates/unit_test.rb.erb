require File.dirname(__FILE__) + '/../spec_helper'

describe "<%=name.capitalize%>Result" do

  describe "#parse" do
    
    before(:each) do
      @xml =  File.read(File.dirname(__FILE__) + "/../fixtures/<%=name%>/wavves.xml")
    end
    
    it "should parse xml" do
      EchoNest::<%=name.capitalize%>Result.parse(@xml)
    end
    
    it "should have artist" do
      <%=name%> = EchoNest::<%=name.capitalize%>Result.parse(@xml)
      <%=name%>.artist.should be_kind_of(EchoNest::Artist)
      <%=name%>.artist.name.should == "Wavves"
      <%=name%>.artist.id.should == "music://id.echonest.com/~/AR/ARVVZQP11E2835DBCB"      
    end
    
    it "should have results" do
      <%=name%> = EchoNest::<%=name.capitalize%>Result.parse(@xml)
      <%=name%>.results.should be_kind_of(EchoNest::BlogResults)
      #TODO: Fill in these values as found in fixture
      <%=name%>.results.found.should == "51"
      <%=name%>.results.shown.should == "15"
      <%=name%>.results.start.should == "0"
      <%=name%>.results.docs.should be_kind_of(Array)
      <%=name%>.results.docs.length.should == 15
    end
    
    describe "result" do
      it "should be an <%=name.capitalize%>Doc" do
        <%=name%> = EchoNest::AudioResult.parse(@xml)
        doc = audio.results.docs[0]  
        doc.should be_kind_of(EchoNest::<%=name.capitalize%>Doc)
        #TODO: Create tests based on attributes in resource
      end
    end
  end    


end
